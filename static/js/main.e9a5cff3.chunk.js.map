{"version":3,"sources":["components/ImageItem.tsx","components/ImageList.tsx","services/imageService.ts","hooks/useImages.ts","components/SearchBar.tsx","assets/logo.png","components/Header.tsx","components/Spinner.tsx","pages/Home.tsx","hooks/useInfiniteScroll.ts","hooks/useLikeToggle.ts","hooks/filterImages.ts","App.tsx","index.tsx"],"names":["ImageItem","image","onLikeToggle","useState","liked","isLiked","setIsLiked","className","price","toFixed","style","fontSize","src","main_attachment","big","alt","title","toUpperCase","author","onClick","id","color","likes_count","ImageList","images","map","index","fetchImages","page","a","fetch","response","ok","Error","json","toggleLike","method","useImages","setImages","loading","setLoading","error","fetchImagesService","data","prevImages","useEffect","SearchBar","onSearch","query","setQuery","type","placeholder","value","onChange","e","target","onKeyDown","Header","handleSearch","logo","Spinner","Home","searchQuery","setSearchQuery","setPage","handleScroll","window","scrollY","innerHeight","document","documentElement","scrollHeight","prevPage","addEventListener","removeEventListener","useInfiniteScroll","handleLikeToggle","updatedImages","Number","console","useLikeToggle","filteredImages","lowerQuery","toLowerCase","filter","includes","toString","filterImages","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e9a5cff3.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { FaThumbsUp, FaRedoAlt } from 'react-icons/fa';\r\nimport 'animate.css';\r\n\r\ninterface ImageItemProps {\r\n    image: {\r\n        id: number;\r\n        title: string;\r\n        main_attachment: { big: string; small: string };\r\n        liked: boolean;\r\n        likes_count: number;\r\n        reload_count: number;\r\n        author: string;\r\n        price: number;\r\n    };\r\n    onLikeToggle: (id: number) => void;\r\n}\r\n\r\nconst ImageItem: React.FC<ImageItemProps> = ({ image, onLikeToggle }) => {\r\n     // Estado local para gestionar el 'like' de la imagen\r\n    const [isLiked, setIsLiked] = useState(image.liked); \r\n\r\n    const handleLikeClick = () => {\r\n        // Cambia el estado de 'liked'\r\n        setIsLiked(!isLiked); \r\n        // Ejecuta la función para notificar el cambio \r\n        onLikeToggle(image.id); \r\n    };\r\n\r\n    return (\r\n        <div className=\"image-item\">\r\n            <div className=\"price-tag\">\r\n                {image.price.toFixed(2)} <span style={{ fontSize: '10px' }}>€</span>\r\n            </div>\r\n            <img src={image.main_attachment.big} alt={image.title} />\r\n            <div className=\"image-info\">\r\n                <h3>{image.title.toUpperCase()}</h3>\r\n                <p>by {image.author}</p>\r\n            </div>\r\n            <div className=\"icon-section\">\r\n                <div className=\"like-section\">\r\n                    <FaThumbsUp\r\n                        className={`like-icon ${isLiked ? 'animate__animated animate__heartBeat' : ''}`} \r\n                        onClick={handleLikeClick}\r\n                        // Cambia a verde si está \"liked\"\r\n                        style={{ color: isLiked ? '#11e968' : '#fff' }} \r\n                    />\r\n                    <span style={{ color: '#fff' }}>00{image.likes_count}</span>\r\n                </div>\r\n                <div className=\"reload-section\">\r\n                    <FaRedoAlt className=\"reload-icon\" />\r\n                    <span style={{ color: '#fff' }}>000</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageItem;\r\n","import React from 'react';\r\nimport ImageItem from './ImageItem';\r\n\r\n\r\ninterface ImageListProps {\r\n    images: any[];\r\n    onLikeToggle: (id: number) => void;\r\n}\r\n\r\nconst ImageList: React.FC<ImageListProps> = ({ images, onLikeToggle }) => {\r\n    return (\r\n        <div className=\"image-list\">\r\n            {images.map((image, index) => (\r\n                <ImageItem key={index} image={image} onLikeToggle={onLikeToggle} />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImageList;\r\n","export const fetchImages = async (page: number) => {\r\n    const response = await fetch(`http://localhost:3100/images?page=${page}`);\r\n    if (!response.ok) {\r\n      throw new Error('Error al obtener imágenes');\r\n    }\r\n    return response.json();  \r\n\r\n  \r\n  };\r\n  \r\n  export const toggleLike = async (id: number) => {\r\n    const response = await fetch(`http://localhost:3100/images/${id}/likes`, {\r\n      method: 'POST',\r\n    });\r\n    return response;\r\n  };\r\n  ","import { useState, useEffect } from 'react';\r\nimport { fetchImages as fetchImagesService } from '../services/imageService';\r\n\r\n/**\r\n * Hook que maneja la lógica de obtener imágenes desde la API.\r\n * \r\n * @param {number} page - Número de página para la paginación.\r\n * @returns {object} - Un objeto que contiene las imágenes, estado de carga y errores.\r\n */\r\nconst useImages = (page: number) => {\r\n  const [images, setImages] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchImages = async (page: number) => {\r\n    setLoading(true);\r\n    try {\r\n      /* setTimeout(async () => {\r\n         // Llamada a la API desde services\r\n        const data = await fetchImagesService(page); \r\n         // Paginación\r\n        setImages((prevImages) => (page === 1 ? data : [...prevImages, ...data])); \r\n        setLoading(false);\r\n        \r\n      }, 1000); */ \r\n      //usar cuando esta en testing\r\n      const data = await fetchImagesService(page); \r\n      setImages((prevImages) => (page === 1 ? data : [...prevImages, ...data])); \r\n      setLoading(false);\r\n    } catch (err) {\r\n      \r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchImages(page);\r\n  }, [page]);\r\n\r\n  return { images, loading, error, setImages, fetchImages };\r\n};\r\n\r\nexport default useImages;\r\n","import React, { useState } from \"react\";\r\nimport { IoIosSearch } from \"react-icons/io\";\r\n\r\ninterface SearchBarProps {\r\n  onSearch?: (query: string) => void;\r\n}\r\n\r\nexport const SearchBar: React.FC<SearchBarProps> = ({ onSearch }) => {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleSearch = () => {\r\n    if (onSearch) {\r\n      onSearch(query);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-bar\">\r\n      <IoIosSearch className=\"search-icon\" />\r\n      <input \r\n        type=\"text\" \r\n        placeholder=\"You're looking for something?\" \r\n        value={query} \r\n        onChange={(e) => setQuery(e.target.value)} \r\n        onKeyDown={() =>  handleSearch()} \r\n      />\r\n    </div>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.ccf30e6a.png\";","import { SearchBar } from \"./SearchBar\";\r\nimport logo from \"../assets/logo.png\";\r\n\r\ninterface HeaderProps {\r\n  handleSearch: (query: string) => void;\r\n}\r\n\r\nexport const Header = ({ handleSearch }: HeaderProps) => {\r\n  return (\r\n    <header className=\"header\">\r\n       <img src={logo} alt=\"Logo\" className=\"logo\"  />\r\n      <SearchBar onSearch={handleSearch} />\r\n    </header>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\n\r\nconst Spinner: React.FC = () => {\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import { useState } from 'react';\r\nimport ImageList from '../components/ImageList';\r\nimport useImages from '../hooks/useImages';\r\nimport { Header } from '../components/Header';\r\nimport Spinner from '../components/Spinner';\r\nimport { useInfiniteScroll } from '../hooks/useInfiniteScroll';\r\nimport { useLikeToggle } from '../hooks/useLikeToggle';\r\nimport { filterImages } from '../hooks/filterImages';\r\n\r\nexport const Home = () => {\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [page, setPage] = useState(1);\r\n    \r\n    const { images, loading, error, setImages, fetchImages } = useImages(page);  \r\n\r\n    // Lógica de scroll infinito\r\n    useInfiniteScroll(loading, fetchImages, page, setPage); \r\n\r\n    // Lógica de like/unlike\r\n    const handleLikeToggle = useLikeToggle(images, setImages);\r\n\r\n    // Filtrar imágenes\r\n    const filteredImages = filterImages(images, searchQuery);\r\n\r\n    return (\r\n        <div className='container'>\r\n            <Header handleSearch={setSearchQuery} />\r\n            <ImageList images={filteredImages} onLikeToggle={handleLikeToggle} />\r\n            {loading && <Spinner />}\r\n            {error && <p>Error: {error}</p>}\r\n        </div>\r\n    );\r\n};\r\n","import { useEffect } from 'react';\r\n\r\n/**\r\n * Hook que maneja el scroll infinito. Escucha el evento de scroll y, \r\n * cuando el usuario llega al final de la página, incrementa el valor de `page`\r\n * y ejecuta la función `fetchImages` para cargar más imágenes.\r\n * \r\n * @param {boolean} loading - Indica si las imágenes están cargando.\r\n * @param {(page: number) => void} fetchImages - Función para obtener las imágenes de la API.\r\n * @param {number} page - Página actual.\r\n * @param {React.Dispatch<React.SetStateAction<number>>} setPage - Función para actualizar el número de página.\r\n */\r\nexport const useInfiniteScroll = (\r\n  loading: boolean,\r\n  fetchImages: (page: number) => void,\r\n  page: number,\r\n  setPage: React.Dispatch<React.SetStateAction<number>>\r\n) => {\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n        // Posición actual del scroll\r\n      const scrollY = window.scrollY;\r\n       // Altura de la ventana\r\n      const windowHeight = window.innerHeight; \r\n       // Altura total del documento\r\n      const documentHeight = document.documentElement.scrollHeight; \r\n\r\n      // Si el usuario ha llegado al final de la página y no está cargando imágenes\r\n      if (scrollY + windowHeight >= documentHeight - 100 && !loading) {\r\n        // Incrementa la página y carga más imágenes\r\n        setPage((prevPage) => prevPage + 1);  \r\n        // Carga más imágenes para la nueva página\r\n        fetchImages(page + 1);  \r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);  // Añadir el evento de scroll\r\n    return () => window.removeEventListener('scroll', handleScroll);  // Limpiar el evento al desmontar\r\n  }, [loading, page, fetchImages, setPage]);\r\n};\r\n","import { toggleLike } from '../services/imageService';\r\n\r\n/**\r\n * Hook que maneja la acción de \"like/unlike\" para las imágenes.\r\n * Envía una petición `POST` a la API y actualiza el estado de las imágenes\r\n * para reflejar el nuevo estado de \"liked\".\r\n * \r\n * @param {any[]} images - Array de imágenes actuales.\r\n * @param {(images: any[]) => void} setImages - Función para actualizar el estado de las imágenes.\r\n * @returns {(id: number) => void} handleLikeToggle - Función para alternar el estado de \"like/unlike\".\r\n */\r\nexport const useLikeToggle = (images: any[], setImages: (images: any[]) => void) => {\r\n  const handleLikeToggle = async (id: number) => {\r\n    try {\r\n      // Llamada a la API desde services\r\n      await toggleLike(id);  \r\n\r\n      // Actualizar el estado de las imágenes para reflejar el nuevo estado de \"liked\"\r\n      const updatedImages = images.map(image =>\r\n        Number(image.id) === id ? { ...image, liked: !image.liked } : image\r\n      );\r\n\r\n      setImages(updatedImages);\r\n    } catch (error) {\r\n      console.error('Error al alternar el like:', error);\r\n    }\r\n  };\r\n\r\n  return handleLikeToggle;\r\n};\r\n","/**\r\n * Función que filtra las imágenes en base a la query de búsqueda. \r\n * Realiza una búsqueda sobre el título, autor y precio de cada imagen.\r\n * \r\n * @param {any[]} images - Array de imágenes a filtrar.\r\n * @param {string} searchQuery - Query de búsqueda introducida por el usuario.\r\n * @returns {any[]} - Array de imágenes que coinciden con la búsqueda.\r\n */\r\nexport const filterImages = (images: any[], searchQuery: string) => {\r\n    const lowerQuery = searchQuery.toLowerCase();  \r\n    return images.filter((image) => {\r\n      return (\r\n        // Buscar por título  || Buscar por autor || Buscar por precio\r\n        image.title.toLowerCase().includes(lowerQuery) ||  \r\n        image.author.toLowerCase().includes(lowerQuery) || \r\n        image.price.toString().includes(lowerQuery)  \r\n      );\r\n    });\r\n  };\r\n  ","import React from 'react';\r\nimport { Home } from './pages/Home';\r\nimport './style.css';\r\n\r\nconst App: React.FC = () => {\r\n\r\n  return (\r\n    <Home/>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n); \r\n"],"sourceRoot":""}