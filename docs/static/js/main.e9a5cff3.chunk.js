(this["webpackJsonpsamy-tech-test"]=this["webpackJsonpsamy-tech-test"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(12),s=n.n(a),i=n(3),o=n(8),u=(n(21),n(1)),l=function(e){var t=e.image,n=e.onLikeToggle,c=Object(r.useState)(t.liked),a=Object(i.a)(c,2),s=a[0],l=a[1];return Object(u.jsxs)("div",{className:"image-item",children:[Object(u.jsxs)("div",{className:"price-tag",children:[t.price.toFixed(2)," ",Object(u.jsx)("span",{style:{fontSize:"10px"},children:"\u20ac"})]}),Object(u.jsx)("img",{src:t.main_attachment.big,alt:t.title}),Object(u.jsxs)("div",{className:"image-info",children:[Object(u.jsx)("h3",{children:t.title.toUpperCase()}),Object(u.jsxs)("p",{children:["by ",t.author]})]}),Object(u.jsxs)("div",{className:"icon-section",children:[Object(u.jsxs)("div",{className:"like-section",children:[Object(u.jsx)(o.b,{className:"like-icon ".concat(s?"animate__animated animate__heartBeat":""),onClick:function(){l(!s),n(t.id)},style:{color:s?"#11e968":"#fff"}}),Object(u.jsxs)("span",{style:{color:"#fff"},children:["00",t.likes_count]})]}),Object(u.jsxs)("div",{className:"reload-section",children:[Object(u.jsx)(o.a,{className:"reload-icon"}),Object(u.jsx)("span",{style:{color:"#fff"},children:"000"})]})]})]})},j=function(e){var t=e.images,n=e.onLikeToggle;return Object(u.jsx)("div",{className:"image-list",children:t.map((function(e,t){return Object(u.jsx)(l,{image:e,onLikeToggle:n},t)}))})},b=n(4),f=n.n(b),d=n(9),h=n(5),m=function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3100/images?page=".concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Error al obtener im\xe1genes");case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3100/images/".concat(t,"/likes"),{method:"POST"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),u=o[0],l=o[1],j=Object(r.useState)(null),b=Object(i.a)(j,2),O=b[0],p=(b[1],function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,m(t);case 4:n=e.sent,a((function(e){return 1===t?n:[].concat(Object(d.a)(e),Object(d.a)(n))})),l(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());return Object(r.useEffect)((function(){p(e)}),[e]),{images:c,loading:u,error:O,setImages:a,fetchImages:p}},x=n(13),g=function(e){var t=e.onSearch,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],s=c[1];return Object(u.jsxs)("div",{className:"search-bar",children:[Object(u.jsx)(x.a,{className:"search-icon"}),Object(u.jsx)("input",{type:"text",placeholder:"You're looking for something?",value:a,onChange:function(e){return s(e.target.value)},onKeyDown:function(){t&&t(a)}})]})},v=n.p+"static/media/logo.ccf30e6a.png",k=function(e){var t=e.handleSearch;return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("img",{src:v,alt:"Logo",className:"logo"}),Object(u.jsx)(g,{onSearch:t})]})},w=function(){return Object(u.jsx)("div",{className:"spinner-container",children:Object(u.jsx)("div",{className:"spinner"})})},N=n(10),S=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(1),s=Object(i.a)(a,2),o=s[0],l=s[1],b=p(o),d=b.images,m=b.loading,x=b.error,g=b.setImages;!function(e,t,n,c){Object(r.useEffect)((function(){var r=function(){window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-100&&!e&&(c((function(e){return e+1})),t(n+1))};return window.addEventListener("scroll",r),function(){return window.removeEventListener("scroll",r)}}),[e,n,t,c])}(m,b.fetchImages,o,l);var v=function(e,t){var n=function(){var n=Object(h.a)(f.a.mark((function n(r){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O(r);case 3:c=e.map((function(e){return Number(e.id)===r?Object(N.a)(Object(N.a)({},e),{},{liked:!e.liked}):e})),t(c),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Error al alternar el like:",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}();return n}(d,g),S=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.title.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.price.toString().includes(n)}))}(d,n);return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(k,{handleSearch:c}),Object(u.jsx)(j,{images:S,onLikeToggle:v}),m&&Object(u.jsx)(w,{}),x&&Object(u.jsxs)("p",{children:["Error: ",x]})]})},y=(n(24),function(){return Object(u.jsx)(S,{})});s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.e9a5cff3.chunk.js.map