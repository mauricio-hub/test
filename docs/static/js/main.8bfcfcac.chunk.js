(this["webpackJsonpsamy-tech-test"]=this["webpackJsonpsamy-tech-test"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(12),s=n.n(a),o=n(3),i=n(8),l=(n(21),n(1)),u=function(e){var t=e.image,n=e.onLikeToggle,c=Object(r.useState)(t.liked),a=Object(o.a)(c,2),s=a[0],u=a[1];return Object(l.jsxs)("div",{className:"image-item",children:[Object(l.jsxs)("div",{className:"price-tag",children:[t.price.toFixed(2)," ",Object(l.jsx)("span",{style:{fontSize:"10px"},children:"\u20ac"})]}),Object(l.jsx)("img",{src:t.main_attachment.big,alt:t.title}),Object(l.jsxs)("div",{className:"image-info",children:[Object(l.jsx)("h3",{children:t.title.toUpperCase()}),Object(l.jsxs)("p",{children:["by ",t.author]})]}),Object(l.jsxs)("div",{className:"icon-section",children:[Object(l.jsxs)("div",{className:"like-section",children:[Object(l.jsx)(i.b,{className:"like-icon ".concat(s?"animate__animated animate__heartBeat":""),onClick:function(){u(!s),n(t.id)},style:{color:s?"#11e968":"#fff"}}),Object(l.jsxs)("span",{style:{color:"#fff"},children:["00",t.likes_count]})]}),Object(l.jsxs)("div",{className:"reload-section",children:[Object(l.jsx)(i.a,{className:"reload-icon"}),Object(l.jsx)("span",{style:{color:"#fff"},children:"000"})]})]})]})},j=function(e){var t=e.images,n=e.onLikeToggle;return Object(l.jsx)("div",{className:"image-list",children:t.map((function(e,t){return Object(l.jsx)(u,{image:e,onLikeToggle:n},t)}))})},d=n(4),b=n.n(d),f=n(9),h=n(5),m=!0,p=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("estoy en produccion....",m),e.next=4,fetch("/data.json");case 4:n=e.sent,console.log("response images....",n),e.next=12;break;case 8:return console.log("estoy en desarrollo"),e.next=11,fetch("http://localhost:3100/images?page=".concat(t));case 11:n=e.sent;case 12:if(n.ok){e.next=14;break}throw new Error("Error al obtener im\xe1genes");case 14:return e.abrupt("return",n.json());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Simulando el toggle de like para la imagen con ID ".concat(t," en producci\xf3n.")),e.abrupt("return",{status:204});case 5:return console.log("like estoy en desarrollo "),e.next=8,fetch("http://localhost:3100/images/".concat(t,"/likes"),{method:"POST"});case 8:if((n=e.sent).ok){e.next=11;break}throw new Error("Error al realizar el like");case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(null),d=Object(o.a)(j,2),m=d[0],g=d[1],O=function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u(!0),g(null),t.prev=2,n=[],1!==e){t.next=11;break}return t.next=7,p(e);case 7:n=t.sent,a(n),t.next=12;break;case 11:a((function(e){return[].concat(Object(f.a)(e),Object(f.a)(e))}));case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),g("Error al obtener las im\xe1genes"),console.error(t.t0);case 18:return t.prev=18,u(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,14,18,21]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){O()}),[e]),{images:c,loading:l,error:m,setImages:a,fetchImages:O}},x=n(13),v=function(e){var t=e.onSearch,n=Object(r.useState)(""),c=Object(o.a)(n,2),a=c[0],s=c[1];return Object(l.jsxs)("div",{className:"search-bar",children:[Object(l.jsx)(x.a,{className:"search-icon"}),Object(l.jsx)("input",{type:"text",placeholder:"You're looking for something?",value:a,onChange:function(e){return s(e.target.value)},onKeyDown:function(){t&&(console.log("query.....",a),t(a))}})]})},k=n.p+"static/media/logo.ccf30e6a.png",w=function(e){var t=e.handleSearch;return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)("img",{src:k,alt:"Logo",className:"logo"}),Object(l.jsx)(v,{onSearch:t})]})},y=function(){return Object(l.jsx)("div",{className:"spinner-container",children:Object(l.jsx)("div",{className:"spinner"})})},N=n(10),S=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(1),s=Object(o.a)(a,2),i=s[0],u=s[1],d=O(i),f=d.images,m=d.loading,p=d.error,x=d.setImages;!function(e,t,n,c){Object(r.useEffect)((function(){var r=function(){window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-100&&!e&&(c((function(e){return e+1})),t(n+1))};return window.addEventListener("scroll",r),function(){return window.removeEventListener("scroll",r)}}),[e,n,t,c])}(m,d.fetchImages,i,u);var v=function(e,t){var n=function(){var n=Object(h.a)(b.a.mark((function n(r){var c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,console.warn("Simulando el toggle de like para la imagen con ID ".concat(r," en producci\xf3n.")),n.next=8;break;case 5:return console.log("like estoy en desarrollo : ....)"),n.next=8,g(r);case 8:c=e.map((function(e){return Number(e.id)===r?Object(N.a)(Object(N.a)({},e),{},{liked:!e.liked,likes_count:e.liked?e.likes_count-1:e.likes_count+1}):e})),t(c),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.error("Error al alternar el like:",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}();return n}(f,x),k=function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.title.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.price.toString().includes(n)}))}(f,n);return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(w,{handleSearch:c}),Object(l.jsx)(j,{images:k,onLikeToggle:v}),m&&Object(l.jsx)(y,{}),p&&Object(l.jsxs)("p",{children:["Error: ",p]})]})},E=(n(24),function(){return Object(l.jsx)(S,{})});s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(E,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8bfcfcac.chunk.js.map